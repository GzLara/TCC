{% extends "paginasweb/bootstrap.html" %}
{% load static %}

{% block conteudo %}

{% block titulo %}
  <title>Lista de sensores</title>
{% endblock titulo %}


<div class="d-flex justify-content-center align-items-center flex-column min-vh-100 p-4" style="margin-top: 2rem; margin-bottom: 2rem;">
  <!-- TABELA ADMIN -->
  <div class="card p-4 shadow mb-5" style="width: 100%; max-width: 1000px;">
    <h3 class="text-center mb-4">Meus sensores</h3>

    <div class="table-responsive">
      <table class="table table-striped table-hover table-bordered align-middle text-center">
        <thead>
          <tr>
            <th style="background-color: #58a4b0; color: white;">Número Serial</th>
            <th style="background-color: #58a4b0; color: white;">Descrição</th>
            <th style="background-color: #58a4b0; color: white;">Tipo</th>
            <th style="background-color: #58a4b0; color: white;">Controlador</th>
            <th style="background-color: #58a4b0; color: white;">Cadastrado por</th>
            <th style="background-color: #58a4b0; color: white;">Cadastrado em</th>
            <th style="background-color: #58a4b0; color: white;">Atualizado em</th>
            {% if sou_admin %}
            <th style="background-color: #58a4b0; color: white;">Opções</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for obj in object_list %}
          <tr>
            <td>{{ obj.numero_serial }}</td>
            <td>{{ obj.descricao }}</td>
            <td>{{ obj.get_tipo_sensor_display }}</td>
            <td>{{ obj.controlador }}</td>
            <td>{{ obj.cadastrado_por }}</td>
            <td>{{ obj.cadastrado_em }}</td>
            <td>{{ obj.atualizado_em }}</td>
            {% if sou_admin %}
            <td>
              <div class="btn-group">
                <a href="{% url 'editar-sensor-admin' obj.pk %}" class="btn btn-sm btn-warning"><i class="bi bi-pencil-square"></i></a>
                <a href="{% url 'excluir-sensor-admin' obj.pk %}" class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></a>
              </div>
              {% else %}
              -
            </td>
            {% endif %}
          </tr>
          {% empty %}
          <tr>
            <td colspan="7">Nenhum controlador do admin encontrado.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  
  

  {% if todos_sensores %}
  <div class="card p-4 shadow" style="width: 100%; max-width: 1000px; margin-top: 0.5rem;">
    <h3 class="text-center mb-4">Sensores dos Clientes</h3>

    <div class="table-responsive">
      <table class="table table-striped table-hover table-bordered align-middle text-center">
        <thead>
          <tr>
            <th style="background-color: #EF233C; color: white;">Número Serial</th>
            <th style="background-color: #EF233C; color: white;">Descrição</th>
            <th style="background-color: #EF233C; color: white;">Tipo</th>
            <th style="background-color: #EF233C; color: white;">Controlador</th>
            <th style="background-color: #EF233C; color: white;">Cadastrado por</th>
            <th style="background-color: #EF233C; color: white;">Cadastrado em</th>
            <th style="background-color: #EF233C; color: white;">Atualizado em</th>
            <th style="background-color: #EF233C; color: white;">Opções</th>
          </tr>
        </thead>
        <tbody>
          {% for obj in todos_sensores %}
          <tr>
            <td>{{ obj.numero_serial }}</td>
            <td>{{ obj.descricao }}</td>
            <td>{{ obj.get_tipo_sensor_display }}</td>
            <td>{{ obj.controlador }}</td>
            <td>{{ obj.cadastrado_por }}</td>
            <td>{{ obj.cadastrado_em }}</td>
            <td>{{ obj.atualizado_em }}</td>
            <td>
              <div class="btn-group">
                <a href="{% url 'editar-sensor-admin' obj.pk %}" class="btn btn-sm btn-warning"><i class="bi bi-pencil-square"></i></a>
                <a href="{% url 'excluir-sensor-admin' obj.pk %}" class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></a>
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">Nenhum controlador de cliente encontrado.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
  

</div>

{% endblock %}
